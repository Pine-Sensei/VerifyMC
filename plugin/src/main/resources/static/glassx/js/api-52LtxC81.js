const e=new class{getAuthHeaders(){const e=localStorage.getItem("admin_token");return e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}}async request(e,t={}){const n=`/api${e}`,s=await fetch(n,{headers:this.getAuthHeaders(),...t});if(401===s.status||403===s.status)throw localStorage.removeItem("admin_token"),window.location.href="/login",new Error("Authentication required");const r=await s.json();if(r&&!1===r.success&&r.message&&r.message.includes("Authentication required"))throw localStorage.removeItem("admin_token"),window.location.href="/login",new Error("Authentication required");return r}async getConfig(){return this.request("/config")}async getCaptcha(){return this.request("/captcha")}async sendCode(e){return this.request("/send_code",{method:"POST",body:JSON.stringify(e)})}async register(e){return this.request("/register",{method:"POST",body:JSON.stringify(e)})}async adminLogin(e){return this.request("/admin-login",{method:"POST",body:JSON.stringify(e)})}async getPendingList(e="zh"){return this.request(`/pending-list?language=${e}`)}async reviewUser(e){return this.request("/review",{method:"POST",body:JSON.stringify(e)})}async deleteUser(e,t="zh"){return this.request("/delete-user",{method:"POST",body:JSON.stringify({uuid:e,language:t})})}async banUser(e,t="zh"){return this.request("/ban-user",{method:"POST",body:JSON.stringify({uuid:e,language:t})})}async unbanUser(e,t="zh"){return this.request("/unban-user",{method:"POST",body:JSON.stringify({uuid:e,language:t})})}async updateAnnouncement(e,t="zh"){return this.request("/update-announcement",{method:"POST",body:JSON.stringify({content:e,language:t})})}async reloadConfig(){return this.request("/reload-config",{method:"POST"})}async getAllUsers(){return this.request("/all-users")}async getUsersPaginated(e=1,t=10,n=""){const s=new URLSearchParams({page:e.toString(),pageSize:t.toString()});return n.trim()&&s.append("search",n.trim()),this.request(`/users-paginated?${s.toString()}`)}async getPendingUsers(){const e=await this.getPendingList();return{success:e.success,data:e.users,message:e.message}}async getUserStatus(){return this.request("/user-status")}async changePassword(e){return this.request("/change-password",{method:"POST",body:JSON.stringify(e)})}isAuthenticated(){return null!==localStorage.getItem("admin_token")}logout(){localStorage.removeItem("admin_token")}async checkVersion(){return this.request("/version-check")}};export{e as a};
