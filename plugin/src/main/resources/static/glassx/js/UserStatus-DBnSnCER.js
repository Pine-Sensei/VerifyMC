import{d as e,j as t,c as s,s as a,k as l,y as r,g as o,a as n,q as i,b as c,n as u,p as d,t as m,f as x,o as v,u as p,i as b,r as g,F as f,m as y,Q as h}from"./vendor-Cz9CUY-1.js";import{L as w}from"./index-DiLVYeX1.js";import{C as k,X as $,A as j,I as _,a as C,c as S,d as I,e as z,f as T,R as U,H as q}from"./utils-BHPIt2x-.js";import{a as A}from"./api-52LtxC81.js";import"./components-CLK7JpZA.js";const B={key:0,class:"max-w-sm w-full"},F={class:"flex-shrink-0"},H={class:"flex-1 min-w-0"},J={class:"text-sm font-medium text-white"},L={key:0,class:"text-sm text-gray-300 mt-1"},N=e({__name:"Toast",props:{type:{default:"info"},title:{},message:{},duration:{default:3e3},autoClose:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:p}){const b=e,g=p,f=t(!1),y=s(()=>{const e="border-l-4";switch(b.type){case"success":return`${e} border-green-400 bg-green-900/20`;case"error":return`${e} border-red-400 bg-red-900/20`;case"warning":return`${e} border-yellow-400 bg-yellow-900/20`;default:return`${e} border-blue-400 bg-blue-900/20`}}),h=()=>{f.value=!1,setTimeout(()=>{g("close")},300)};return a(()=>{f.value=!0,b.autoClose&&setTimeout(()=>{h()},b.duration)}),(e,t)=>(v(),l(r,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-2 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-2 scale-95"},{default:o(()=>[f.value?(v(),n("div",B,[c("div",{class:u(["glass-card p-4 flex items-center space-x-3",y.value])},[c("div",F,["success"===e.type?(v(),l(d(k),{key:0,class:"w-5 h-5 text-green-400"})):"error"===e.type?(v(),l(d($),{key:1,class:"w-5 h-5 text-red-400"})):"warning"===e.type?(v(),l(d(j),{key:2,class:"w-5 h-5 text-yellow-400"})):(v(),l(d(_),{key:3,class:"w-5 h-5 text-blue-400"}))]),c("div",H,[c("p",J,m(e.title),1),e.message?(v(),n("p",L,m(e.message),1)):i("",!0)]),c("button",{onClick:h,class:"flex-shrink-0 text-gray-400 hover:text-white transition-colors duration-200"},[x(d(C),{class:"w-4 h-4"})])],2)])):i("",!0)]),_:1}))}}),O={class:"min-h-screen p-6 relative overflow-hidden"},Q={class:"relative z-10 mb-8"},R={class:"max-w-4xl mx-auto flex justify-between items-center"},X={class:"flex items-center space-x-3"},D={class:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center"},E={key:0,class:"text-2xl font-bold gradient-text"},G={class:"flex items-center space-x-4"},K={class:"relative z-10 max-w-4xl mx-auto"},M={class:"glass-card p-8 animate-scale-in"},P={class:"text-center mb-8"},V={class:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},W={class:"text-3xl font-bold gradient-text mb-2"},Y={key:0,class:"text-gray-300"},Z={key:0,class:"text-center py-12"},ee={class:"text-gray-300"},te={key:1,class:"space-y-6"},se={class:"flex items-center space-x-4"},ae={class:"flex-shrink-0"},le={class:"flex-1"},re={class:"text-xl font-bold text-white mb-1"},oe={class:"text-gray-300"},ne={key:0,class:"glass-card p-6 border-l-4 border-red-400 bg-red-900/20"},ie={class:"text-lg font-semibold text-white mb-2"},ce={class:"text-gray-300"},ue={key:1,class:"glass-card p-6"},de={class:"text-lg font-semibold text-white mb-4"},me={class:"grid md:grid-cols-2 gap-4"},xe={class:"block text-sm font-medium text-gray-400 mb-1"},ve={class:"text-white"},pe={class:"block text-sm font-medium text-gray-400 mb-1"},be={class:"text-white"},ge={class:"flex flex-col sm:flex-row gap-4 justify-center"},fe=["disabled"],ye={key:2,class:"text-center py-12"},he={class:"w-16 h-16 bg-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},we={class:"text-xl font-bold text-white mb-2"},ke={class:"text-gray-300 mb-6"},$e={class:"fixed top-0 right-0 z-50 p-4 space-y-2"},je=e({__name:"UserStatus",setup(e){const r=b("config",{value:{}}),_=h(),{t:C}=p(),B=t(!0),F=t(!1),H=t(null),J=t(null),L=t([]);let je=0;const _e=(e,t,s)=>{const a=++je;L.value.push({id:a,type:e,title:t,message:s})},Ce=s(()=>{if(!H.value)return"";switch(H.value.status){case"pending":return"border-yellow-400 bg-yellow-900/20";case"approved":return"border-green-400 bg-green-900/20";case"rejected":return"border-red-400 bg-red-900/20";default:return"border-gray-400 bg-gray-900/20"}}),Se=s(()=>{if(!H.value)return"bg-gray-500";switch(H.value.status){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}),Ie=async()=>{try{const e=await A.getUserStatus();e.success?H.value=e.data:_e("error",C("common.error"),e.message&&e.message!==C("common.error")?e.message:"")}catch(e){_e("error",C("common.error"),C("errors.network"))}finally{B.value=!1,F.value=!1}},ze=async()=>{F.value=!0,await Ie()},Te=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),_.push("/")};return a(()=>{const e=localStorage.getItem("user");if(e)try{J.value=JSON.parse(e)}catch(t){}Ie()}),(e,t)=>{var s,a;const p=g("router-link");return v(),n("div",O,[t[1]||(t[1]=c("div",{class:"absolute inset-0 overflow-hidden"},[c("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),c("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"})],-1)),c("nav",Q,[c("div",R,[c("div",X,[c("div",D,[x(d(S),{class:"w-6 h-6 text-white"})]),void 0!==(null==(a=null==(s=d(r).value)?void 0:s.frontend)?void 0:a.web_server_prefix)?(v(),n("h1",E,m(d(r).value.frontend.web_server_prefix),1)):i("",!0)]),c("div",G,[c("button",{onClick:Te,class:"glass-button text-white hover:text-red-300 transition-colors duration-300 flex items-center space-x-2"},[x(d(I),{class:"w-4 h-4"}),c("span",null,m(e.$t("nav.logout")),1)]),x(w)])])]),c("main",K,[c("div",M,[c("div",P,[c("div",V,[x(d(z),{class:"w-8 h-8 text-white"})]),c("h1",W,m(e.$t("user_status.title")),1),J.value?(v(),n("p",Y,m(J.value.username),1)):i("",!0)]),B.value?(v(),n("div",Z,[t[0]||(t[0]=c("div",{class:"spinner mx-auto mb-4"},null,-1)),c("p",ee,m(e.$t("common.loading")),1)])):H.value?(v(),n("div",te,[c("div",{class:u(["glass-card p-6 border-l-4",Ce.value])},[c("div",se,[c("div",ae,[c("div",{class:u(["w-12 h-12 rounded-xl flex items-center justify-center",Se.value])},["pending"===H.value.status?(v(),l(d(T),{key:0,class:"w-6 h-6 text-white"})):"approved"===H.value.status?(v(),l(d(k),{key:1,class:"w-6 h-6 text-white"})):(v(),l(d($),{key:2,class:"w-6 h-6 text-white"}))],2)]),c("div",le,[c("h3",re,m(e.$t(`user_status.status.${H.value.status}`)),1),c("p",oe,m(e.$t(`user_status.messages.${H.value.status}`)),1)])])],2),"rejected"===H.value.status&&H.value.reason?(v(),n("div",ne,[c("h4",ie,m(e.$t("user_status.reason")),1),c("p",ce,m(H.value.reason),1)])):i("",!0),J.value?(v(),n("div",ue,[c("h4",de,m(e.$t("common.info")),1),c("div",me,[c("div",null,[c("label",xe,m(e.$t("register.form.username")),1),c("p",ve,m(J.value.username),1)]),c("div",null,[c("label",pe,m(e.$t("register.form.email")),1),c("p",be,m(J.value.email),1)])])])):i("",!0),c("div",ge,[c("button",{onClick:ze,disabled:F.value,class:"glass-button text-white hover:text-blue-300 transition-colors duration-300 flex items-center justify-center space-x-2"},[x(d(U),{class:u(["w-4 h-4",{"animate-spin":F.value}])},null,8,["class"]),c("span",null,m(e.$t("common.refresh")),1)],8,fe),x(p,{to:"/",class:"glass-button text-white hover:text-blue-300 transition-colors duration-300 flex items-center justify-center space-x-2"},{default:o(()=>[x(d(q),{class:"w-4 h-4"}),c("span",null,m(e.$t("common.back")),1)]),_:1})])])):(v(),n("div",ye,[c("div",he,[x(d(j),{class:"w-8 h-8 text-white"})]),c("h3",we,m(e.$t("common.error")),1),c("p",ke,m(e.$t("errors.unknown")),1),c("button",{onClick:Ie,class:"glass-button bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all duration-300"},m(e.$t("common.refresh")),1)]))])]),c("div",$e,[(v(!0),n(f,null,y(L.value,e=>(v(),l(N,{key:e.id,type:e.type,title:e.title,message:e.message,onClose:t=>(e=>{const t=L.value.findIndex(t=>t.id===e);t>-1&&L.value.splice(t,1)})(e.id)},null,8,["type","title","message","onClose"]))),128))])])}}});export{je as default};
