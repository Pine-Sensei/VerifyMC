import{d as e,j as t,a as s,b as a,F as l,m as r,n,t as o,O as i,o as u,J as d,N as c,q as m,u as v,c as g,s as h,v as w,w as b,f as p,g as f,P as x,k as _,C as k,L as y}from"./vendor-Cz9CUY-1.js";import{u as $}from"./index-DiLVYeX1.js";import{a as C}from"./api-52LtxC81.js";import{_ as j}from"./components-CLK7JpZA.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-Ch3AKhCE.js";import"./utils-BHPIt2x-.js";const V={class:"w-full"},L={class:"inline-flex h-10 items-center justify-center rounded-md bg-white/10 backdrop-blur-sm p-1 text-white/70 border border-white/20"},M=["onClick"],z={class:"mt-2"},B=e({__name:"Tabs",props:{tabs:{},defaultTab:{default:""}},setup(e){var c;const m=e,v=t(m.defaultTab||(null==(c=m.tabs[0])?void 0:c.value)||"");return d("activeTab",v),(e,t)=>(u(),s("div",V,[a("div",L,[(u(!0),s(l,null,r(e.tabs,e=>(u(),s("button",{key:e.value,onClick:t=>v.value=e.value,class:n(["inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",v.value===e.value?"bg-white/20 text-white shadow-sm":"text-white/70 hover:text-white"])},o(e.label),11,M))),128))]),a("div",z,[i(e.$slots,"default",{activeTab:v.value})])]))}}),A={class:"rounded-md border border-white/20 overflow-hidden"},T={class:"w-full"};const U=j({},[["render",function(e,t){return u(),s("div",A,[a("table",T,[i(e.$slots,"default")])])}]]),S={class:"bg-white/5"};const I=j({},[["render",function(e,t){return u(),s("thead",S,[i(e.$slots,"default")])}]]);const N=j({},[["render",function(e,t){return u(),s("tbody",null,[i(e.$slots,"default")])}]]),H={class:"border-b border-white/10 hover:bg-white/5 transition-colors"};const D=j({},[["render",function(e,t){return u(),s("tr",H,[i(e.$slots,"default")])}]]),J={class:"px-4 py-3 text-left text-sm font-medium text-white/90"};const O=j({},[["render",function(e,t){return u(),s("th",J,[i(e.$slots,"default")])}]]),W={class:"px-4 py-3 text-sm text-white/80"};const q=j({},[["render",function(e,t){return u(),s("td",W,[i(e.$slots,"default")])}]]),F=e({__name:"Button",props:{variant:{default:"default"},size:{default:"default"},className:{}},setup(e){const t={default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-white/20 bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white",secondary:"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20",ghost:"hover:bg-white/10 text-white",link:"text-blue-400 underline-offset-4 hover:underline"},a={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return(e,l)=>(u(),s("button",c({class:["inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative z-10",t[e.variant],a[e.size],e.className]},e.$attrs),[i(e.$slots,"default")],16))}}),E={key:0,class:"modal-overlay"},G={class:"modal-dialog"},K={class:"flex items-center justify-between mb-4"},Q={class:"text-lg font-semibold text-white"},R={class:"mb-6"},X={class:"text-white/80"},Y={class:"flex gap-3 justify-end"},Z=j(e({__name:"ConfirmDialog",props:{show:{type:Boolean},title:{},message:{},confirmText:{default:"确认"},cancelText:{default:"取消"},type:{default:"danger"}},emits:["confirm","cancel"],setup(e,{emit:t}){const l=t,r=()=>{l("confirm")},i=()=>{l("cancel")};return(e,t)=>e.show?(u(),s("div",E,[a("div",{class:"modal-backdrop",onClick:i}),a("div",G,[a("div",K,[a("h3",Q,o(e.title),1),a("button",{onClick:i,class:"text-white/60 hover:text-white transition-colors"},t[0]||(t[0]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",R,[a("p",X,o(e.message),1)]),a("div",Y,[a("button",{onClick:i,class:"px-4 py-2 text-white/80 hover:text-white border border-white/20 hover:border-white/40 rounded-md transition-colors"},o(e.cancelText),1),a("button",{onClick:r,class:n(["px-4 py-2 rounded-md transition-colors","danger"===e.type?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},o(e.confirmText),3)])])])):m("",!0)}}),[["__scopeId","data-v-85e7afb1"]]),ee={class:"relative"},te={class:"relative"},se=["value","placeholder"],ae=e({__name:"SearchBar",props:{modelValue:{},placeholder:{default:"搜索..."}},emits:["update:modelValue"],setup:e=>(e,t)=>(u(),s("div",ee,[a("div",te,[a("input",{value:e.modelValue,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),type:"text",placeholder:e.placeholder,class:"w-full px-4 py-2 pl-10 pr-10 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/40 transition-all duration-200"},null,40,se),t[3]||(t[3]=a("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[a("svg",{class:"h-5 w-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e.modelValue?(u(),s("button",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("update:modelValue","")),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-white/60 hover:text-white transition-colors"},t[2]||(t[2]=[a("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):m("",!0)])]))}),le={key:0,class:"flex items-center justify-between mt-6"},re={class:"text-sm text-white/60"},ne={class:"flex items-center space-x-2"},oe=["disabled"],ie={class:"flex items-center space-x-1"},ue={key:1,class:"px-2 text-white/60"},de=["onClick"],ce={key:2,class:"px-2 text-white/60"},me=["disabled"],ve={class:"flex items-center space-x-2 text-sm"},ge={class:"text-white/60"},he=["value"],we=e({__name:"Pagination",props:{currentPage:{},totalPages:{},totalCount:{},pageSize:{},hasNext:{type:Boolean},hasPrev:{type:Boolean}},emits:["page-change","page-size-change"],setup(e,{emit:t}){const{t:i}=v(),d=e,c=t,h=g(()=>(d.currentPage-1)*d.pageSize+1),w=g(()=>Math.min(d.currentPage*d.pageSize,d.totalCount)),b=g(()=>{const e=[];for(let t=Math.max(2,d.currentPage-2);t<=Math.min(d.totalPages-1,d.currentPage+2);t++)e.push(t);return e}),p=g(()=>d.totalPages>1&&!b.value.includes(1)),f=g(()=>d.totalPages>1&&!b.value.includes(d.totalPages)),x=g(()=>b.value.length>0&&b.value[0]>2),_=g(()=>b.value.length>0&&b.value[b.value.length-1]<d.totalPages-1),k=e=>{e>=1&&e<=d.totalPages&&e!==d.currentPage&&c("page-change",e)};return(e,t)=>e.totalPages>1?(u(),s("div",le,[a("div",re,o(e.$t("pagination.showing"))+" "+o(h.value)+" - "+o(w.value)+" "+o(e.$t("pagination.of"))+" "+o(e.totalCount)+" "+o(e.$t("pagination.items")),1),a("div",ne,[a("button",{onClick:t[0]||(t[0]=t=>k(e.currentPage-1)),disabled:!e.hasPrev,class:n(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e.hasPrev?"bg-white/10 text-white hover:bg-white/20 border border-white/20 hover:border-white/40":"bg-white/5 text-white/40 border border-white/10 cursor-not-allowed"])},o(e.$t("pagination.previous")),11,oe),a("div",ie,[p.value?(u(),s("button",{key:0,onClick:t[1]||(t[1]=e=>k(1)),class:n(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",1===e.currentPage?"bg-blue-500 text-white border border-blue-500":"bg-white/10 text-white hover:bg-white/20 border border-white/20 hover:border-white/40"])}," 1 ",2)):m("",!0),x.value?(u(),s("span",ue,"...")):m("",!0),(u(!0),s(l,null,r(b.value,t=>(u(),s("button",{key:t,onClick:e=>k(t),class:n(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e.currentPage===t?"bg-blue-500 text-white border border-blue-500":"bg-white/10 text-white hover:bg-white/20 border border-white/20 hover:border-white/40"])},o(t),11,de))),128)),_.value?(u(),s("span",ce,"...")):m("",!0),f.value?(u(),s("button",{key:3,onClick:t[2]||(t[2]=t=>k(e.totalPages)),class:n(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e.currentPage===e.totalPages?"bg-blue-500 text-white border border-blue-500":"bg-white/10 text-white hover:bg-white/20 border border-white/20 hover:border-white/40"])},o(e.totalPages),3)):m("",!0)]),a("button",{onClick:t[3]||(t[3]=t=>k(e.currentPage+1)),disabled:!e.hasNext,class:n(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e.hasNext?"bg-white/10 text-white hover:bg-white/20 border border-white/20 hover:border-white/40":"bg-white/5 text-white/40 border border-white/10 cursor-not-allowed"])},o(e.$t("pagination.next")),11,me)]),a("div",ve,[a("span",ge,o(e.$t("pagination.per_page"))+":",1),a("select",{value:e.pageSize,onChange:t[4]||(t[4]=e=>{var t;return(e=>{if(!e)return;const t=parseInt(e);t>0&&t!==d.pageSize&&c("page-size-change",t)})(null==(t=e.target)?void 0:t.value)}),class:"bg-white/10 border border-white/20 rounded-lg px-2 py-1 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"},t[5]||(t[5]=[a("option",{value:"10",class:"bg-gray-800 text-white"},"10",-1),a("option",{value:"20",class:"bg-gray-800 text-white"},"20",-1),a("option",{value:"50",class:"bg-gray-800 text-white"},"50",-1),a("option",{value:"100",class:"bg-gray-800 text-white"},"100",-1)]),40,he)])])):m("",!0)}}),be={key:0,class:"version-notification"},pe={class:"version-notification-dialog"},fe={class:"flex items-center justify-between mb-4"},xe={class:"flex items-center space-x-3"},_e={class:"text-xl font-semibold text-white"},ke={class:"version-info mb-6"},ye={class:"flex justify-between items-center mb-2"},$e={class:"text-white/80"},Ce={class:"text-white font-mono"},je={class:"flex justify-between items-center mb-4"},Pe={class:"text-white/80"},Ve={class:"text-green-400 font-mono font-semibold"},Le={class:"text-white/70 text-sm"},Me={class:"flex gap-3 justify-end"},ze=j(e({__name:"VersionUpdateNotification",setup(e){const{t:l}=v(),r=t(!1),n=t({currentVersion:"",latestVersion:"",updateAvailable:!1,releasesUrl:""});let i=null;const d=async()=>{try{const e=await C.checkVersion();if(e.success&&e.updateAvailable){n.value={currentVersion:e.currentVersion||"",latestVersion:e.latestVersion||"",updateAvailable:e.updateAvailable||!1,releasesUrl:e.releasesUrl||""};localStorage.getItem("dismissed_version")!==e.latestVersion&&(r.value=!0)}}catch(e){}},c=()=>{r.value=!1,localStorage.setItem("dismissed_version",n.value.latestVersion)},g=()=>{r.value=!1},b=()=>{n.value.releasesUrl&&window.open(n.value.releasesUrl,"_blank"),c()};return h(()=>{d(),i=setInterval(d,18e5)}),w(()=>{i&&clearInterval(i)}),(e,t)=>r.value?(u(),s("div",be,[a("div",{class:"version-notification-backdrop",onClick:c}),a("div",pe,[a("div",fe,[a("div",xe,[t[0]||(t[0]=a("div",{class:"version-icon"},[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])],-1)),a("h3",_e,o(e.$t("version.update_available")),1)]),a("button",{onClick:c,class:"text-white/60 hover:text-white transition-colors"},t[1]||(t[1]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",ke,[a("div",ye,[a("span",$e,o(e.$t("version.current_version"))+":",1),a("span",Ce,o(n.value.currentVersion),1)]),a("div",je,[a("span",Pe,o(e.$t("version.latest_version"))+":",1),a("span",Ve,o(n.value.latestVersion),1)]),a("div",Le,o(e.$t("version.update_description")),1)]),a("div",Me,[a("button",{onClick:g,class:"px-4 py-2 text-white/80 hover:text-white border border-white/20 hover:border-white/40 rounded-lg transition-colors"},o(e.$t("version.remind_later")),1),a("button",{onClick:b,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center space-x-2"},[t[2]||(t[2]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)),a("span",null,o(e.$t("version.download_now")),1)])])])])):m("",!0)}}),[["__scopeId","data-v-1f075c44"]]),Be={class:"space-y-6 w-full overflow-hidden"},Ae={class:"flex justify-between items-center"},Te={class:"text-3xl font-bold text-white"},Ue={key:0,class:"space-y-4"},Se={class:"flex justify-between items-center"},Ie={class:"text-2xl font-bold text-white"},Ne=["disabled","title"],He={class:"overflow-x-auto w-full rounded-md border border-white/20"},De={class:"flex space-x-2"},Je={key:1,class:"space-y-4 w-full"},Oe={class:"flex justify-between items-center"},We={class:"text-2xl font-bold text-white"},qe=["disabled","title"],Fe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ee={class:"max-w-md flex-1"},Ge={class:"overflow-x-auto w-full rounded-md border border-white/20"},Ke={class:"flex items-center gap-2"},Qe=["onClick","disabled","title"],Re=["onClick","disabled","title"],Xe=["onClick","disabled","title"],Ye=["onClick","disabled","title"],Ze={key:0,class:"password-modal-overlay"},et={class:"password-modal-dialog"},tt={class:"text-xl font-semibold text-white mb-6 text-center"},st={class:"space-y-6"},at=["placeholder"],lt={class:"flex justify-end space-x-3"},rt=j(e({__name:"AdminPanelNew",setup(e){const{t:i,locale:d}=v(),c=$();localStorage.getItem("admin_token")||(window.location.href="/login");const w=t(!1),j=t([]),V=t([]);t("");const L=t(1),M=t(10),z=t(0),A=t(0),T=t(!1),S=t(!1),H=t(""),J=t(null),W=g(()=>V.value),E=t(!1),G=t(!1),K=t(!1),Q=t(!1),R=t(null),X=t(""),Y=g(()=>[{value:"review",label:i("admin.tabs.review")},{value:"users",label:i("admin.tabs.users")}]),ee=e=>e?new Date(e).toLocaleDateString():"—",te=e=>{const t="px-2 py-1 rounded-full text-xs font-medium";switch((e||"").toLowerCase()){case"pending":return`${t} bg-yellow-500/20 text-yellow-300`;case"approved":return`${t} bg-green-500/20 text-green-300`;case"rejected":case"banned":return`${t} bg-red-500/20 text-red-300`;default:return`${t} bg-gray-500/20 text-gray-300`}},se=async()=>{try{const e=await C.getPendingList(d.value);e.success?j.value=e.users||[]:e.message&&e.message.includes("Authentication")?c.error(i("common.error"),e.message):c.error(i("common.error"),e.message||i("admin.review.messages.error"))}catch(e){c.error(i("common.error"),i("admin.review.messages.error"))}},le=async()=>{try{w.value=!0;let t=await C.getUsersPaginated(L.value,M.value,H.value);if(t.success&&(!t.users||0===t.users.length)){try{const e=await C.getPendingList(d.value);if(e.success&&e.users&&e.users.length>0){const t=e.users,s=H.value?t.filter(e=>{var t,s;return(null==(t=e.username)?void 0:t.toLowerCase().includes(H.value.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(H.value.toLowerCase()))}):t,a=(L.value-1)*M.value,l=a+M.value,r=s.slice(a,l);return V.value=r,z.value=s.length,A.value=Math.ceil(s.length/M.value),T.value=L.value<A.value,void(S.value=L.value>1)}}catch(e){}try{const e=await C.getAllUsers();if(e.success&&e.users){const t=e.users,s=H.value?t.filter(e=>{var t,s;return(null==(t=e.username)?void 0:t.toLowerCase().includes(H.value.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(H.value.toLowerCase()))}):t,a=(L.value-1)*M.value,l=a+M.value,r=s.slice(a,l);return V.value=r,z.value=s.length,A.value=Math.ceil(s.length/M.value),T.value=L.value<A.value,void(S.value=L.value>1)}}catch(e){}}t.success?(V.value=t.users||[],t.pagination&&(L.value=t.pagination.currentPage,z.value=t.pagination.totalCount,A.value=t.pagination.totalPages,T.value=t.pagination.hasNext,S.value=t.pagination.hasPrev)):(V.value=[],t.message&&t.message.includes("Authentication")?c.error(i("common.error"),t.message):c.error(i("common.error"),t.message||i("admin.users.messages.load_error")))}catch(e){V.value=[],c.error(i("common.error"),i("errors.network"))}finally{w.value=!1}},re=async()=>{if(R.value){w.value=!0,E.value=!1;try{const e=await C.deleteUser(R.value.uuid,d.value);e.success?(c.success(i("admin.users.messages.delete_success"),e.msg&&e.msg!==i("admin.users.messages.delete_success")?e.msg:""),await le()):c.error(i("admin.users.messages.error"),e.msg&&e.msg!==i("admin.users.messages.error")?e.msg:"")}catch(e){c.error(i("admin.users.messages.error"),i("admin.users.messages.error"))}finally{w.value=!1,R.value=null}}},ne=async()=>{if(R.value){w.value=!0,G.value=!1;try{const e=await C.banUser(R.value.uuid,d.value);e.success?(c.success(i("admin.users.messages.ban_success"),e.msg&&e.msg!==i("admin.users.messages.ban_success")?e.msg:""),await le()):c.error(i("admin.users.messages.error"),e.msg&&e.msg!==i("admin.users.messages.error")?e.msg:"")}catch(e){c.error(i("admin.users.messages.error"),i("admin.users.messages.error"))}finally{w.value=!1,R.value=null}}},oe=async()=>{if(R.value){w.value=!0,K.value=!1;try{const e=await C.unbanUser(R.value.uuid,d.value);e.success?(c.success(i("admin.users.messages.unban_success"),e.msg&&e.msg!==i("admin.users.messages.unban_success")?e.msg:""),await le()):c.error(i("admin.users.messages.error"),e.msg&&e.msg!==i("admin.users.messages.error")?e.msg:"")}catch(e){c.error(i("admin.users.messages.error"),i("admin.users.messages.error"))}finally{w.value=!1,R.value=null}}},ie=async()=>{if(R.value&&X.value){w.value=!0;try{const e=await C.changePassword({uuid:R.value.uuid,newPassword:X.value,language:d.value});e.success?(c.success(i("admin.users.messages.password_change_success"),e.msg&&e.msg!==i("admin.users.messages.password_change_success")?e.msg:""),Q.value=!1,X.value="",R.value=null):c.error(i("admin.users.messages.error"),e.msg&&e.msg!==i("admin.users.messages.error")?e.msg:"")}catch(e){c.error(i("admin.users.messages.error"),i("admin.users.messages.error"))}finally{w.value=!1}}},ue=e=>{L.value=e,le()},de=e=>{M.value=e,L.value=1,le()};b(H,()=>{J.value&&clearTimeout(J.value),J.value=setTimeout(()=>{L.value=1,le()},500)});const ce=e=>{"review"===e?se():"users"===e&&(L.value=1,le())};return h(()=>{if(se(),le(),window.WebSocket){const e=`${"https:"===window.location.protocol?"wss":"ws"}://${window.location.hostname}:${window.location.port?parseInt(window.location.port)+1:8081}`;try{new WebSocket(e).onmessage=e=>{try{"user_update"===JSON.parse(e.data).type&&(se(),le())}catch{}}}catch{}}}),(e,t)=>{var v,g,h;return u(),s("div",Be,[a("div",Ae,[a("h1",Te,o(e.$t("admin.title")),1)]),p(B,{tabs:Y.value,"default-tab":"review",onTabChange:ce},{default:f(({activeTab:v})=>["review"===v?(u(),s("div",Ue,[a("div",Se,[a("h2",Ie,o(e.$t("admin.review.title")),1),a("button",{onClick:se,disabled:w.value,class:"glass-button text-white hover:text-blue-300 transition-colors duration-300 p-2",title:e.$t("common.refresh")},[(u(),s("svg",{class:n(["w-5 h-5",{"animate-spin":w.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[7]||(t[7]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))],8,Ne)]),a("div",He,[p(U,{class:"min-w-[600px]"},{default:f(()=>[p(I,null,{default:f(()=>[p(D,null,{default:f(()=>[p(O,null,{default:f(()=>[x(o(e.$t("admin.review.table.username")),1)]),_:1}),p(O,null,{default:f(()=>[x(o(e.$t("admin.review.table.email")),1)]),_:1}),p(O,null,{default:f(()=>[x(o(e.$t("admin.review.table.register_time")),1)]),_:1}),p(O,{class:"w-[150px]"},{default:f(()=>[x(o(e.$t("admin.review.table.actions")),1)]),_:1})]),_:1})]),_:1}),p(N,null,{default:f(()=>[(u(!0),s(l,null,r(j.value,t=>(u(),_(D,{key:t.uuid},{default:f(()=>[p(q,{class:"font-medium text-white"},{default:f(()=>[x(o(t.username),1)]),_:2},1024),p(q,null,{default:f(()=>[x(o(t.email),1)]),_:2},1024),p(q,null,{default:f(()=>[x(o(ee(t.regTime)),1)]),_:2},1024),p(q,null,{default:f(()=>[a("div",De,[p(F,{variant:"outline",size:"sm",onClick:e=>(async e=>{w.value=!0;try{const t=await C.reviewUser({uuid:e,action:"approve",language:d.value});t.success?(c.success(i("admin.review.messages.approve_success"),t.msg&&t.msg!==i("admin.review.messages.approve_success")?t.msg:""),await se()):c.error(i("admin.review.messages.error"),t.msg&&t.msg!==i("admin.review.messages.error")?t.msg:"")}catch(t){c.error(i("admin.review.messages.error"),i("admin.review.messages.error"))}finally{w.value=!1}})(t.uuid),disabled:w.value},{default:f(()=>[x(o(e.$t("admin.review.actions.approve")),1)]),_:2},1032,["onClick","disabled"]),p(F,{variant:"outline",size:"sm",onClick:e=>(async e=>{w.value=!0;try{const t=await C.reviewUser({uuid:e,action:"reject",language:d.value});t.success?(c.success(i("admin.review.messages.reject_success"),t.msg&&t.msg!==i("admin.review.messages.reject_success")?t.msg:""),await se()):c.error(i("admin.review.messages.error"),t.msg&&t.msg!==i("admin.review.messages.error")?t.msg:"")}catch(t){c.error(i("admin.review.messages.error"),i("admin.review.messages.error"))}finally{w.value=!1}})(t.uuid),disabled:w.value},{default:f(()=>[x(o(e.$t("admin.review.actions.reject")),1)]),_:2},1032,["onClick","disabled"])])]),_:2},1024)]),_:2},1024))),128)),0===j.value.length?(u(),_(D,{key:0},{default:f(()=>[p(q,{colspan:"4",class:"text-center py-8 text-white/60"},{default:f(()=>[x(o(e.$t("admin.review.no_pending")),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})])])):m("",!0),"users"===v?(u(),s("div",Je,[a("div",Oe,[a("h2",We,o(e.$t("admin.users.title")),1),a("button",{onClick:le,disabled:w.value,class:"glass-button text-white hover:text-blue-300 transition-colors duration-300 p-2",title:e.$t("common.refresh")},[(u(),s("svg",{class:n(["w-5 h-5",{"animate-spin":w.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[8]||(t[8]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))],8,qe)]),a("div",Fe,[a("div",Ee,[p(ae,{modelValue:H.value,"onUpdate:modelValue":t[0]||(t[0]=e=>H.value=e),placeholder:e.$t("admin.users.search_placeholder")},null,8,["modelValue","placeholder"])])]),a("div",Ge,[p(U,{class:"min-w-[600px] text-xs sm:text-sm"},{default:f(()=>[p(I,null,{default:f(()=>[p(D,null,{default:f(()=>[p(O,null,{default:f(()=>[x(o(e.$t("admin.users.table.username")),1)]),_:1}),p(O,null,{default:f(()=>[x(o(e.$t("admin.users.table.email")),1)]),_:1}),p(O,null,{default:f(()=>[x(o(e.$t("admin.users.table.status")),1)]),_:1}),p(O,null,{default:f(()=>[x(o(e.$t("admin.users.table.register_time")),1)]),_:1}),p(O,{class:"w-[200px]"},{default:f(()=>[x(o(e.$t("admin.users.table.actions")),1)]),_:1})]),_:1})]),_:1}),p(N,null,{default:f(()=>[(u(!0),s(l,null,r(W.value,l=>(u(),_(D,{key:l.uuid},{default:f(()=>[p(q,{class:"font-medium text-white break-all"},{default:f(()=>[x(o(l.username),1)]),_:2},1024),p(q,{class:"break-all"},{default:f(()=>[x(o(l.email),1)]),_:2},1024),p(q,null,{default:f(()=>[a("span",{class:n(te(l.status)+" inline-block px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap")},o(e.$t(`admin.users.status.${(l.status||"").toLowerCase()}`)),3)]),_:2},1024),p(q,null,{default:f(()=>[x(o(ee(l.regTime)),1)]),_:2},1024),p(q,null,{default:f(()=>[a("div",Ke,[a("button",{onClick:e=>{Q.value=!0,R.value=l,X.value=""},disabled:w.value,class:"inline-flex items-center justify-center w-8 h-8 rounded-lg border border-blue-400/50 text-blue-400 hover:bg-blue-400/10 transition-colors",title:e.$t("admin.users.actions.change_password")},t[9]||(t[9]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v-2l-4.257-4.257A6 6 0 0117 9z"})],-1)]),8,Qe),a("button",{onClick:e=>(e=>{R.value=e,E.value=!0})(l),disabled:w.value,class:"inline-flex items-center justify-center w-8 h-8 rounded-lg border border-red-400/50 text-red-400 hover:bg-red-400/10 transition-colors",title:e.$t("admin.users.actions.delete")},t[10]||(t[10]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Re),"banned"!==l.status?(u(),s("button",{key:0,onClick:e=>(e=>{R.value=e,G.value=!0})(l),disabled:w.value,class:"inline-flex items-center justify-center w-8 h-8 rounded-lg border border-red-400/50 text-red-400 hover:bg-red-400/10 transition-colors",title:e.$t("admin.users.actions.ban")},t[11]||(t[11]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636"})],-1)]),8,Xe)):m("",!0),"banned"===l.status?(u(),s("button",{key:1,onClick:e=>(e=>{R.value=e,K.value=!0})(l),disabled:w.value,class:"inline-flex items-center justify-center w-8 h-8 rounded-lg border border-green-400/50 text-green-400 hover:bg-green-400/10 transition-colors",title:e.$t("admin.users.actions.unban")},t[12]||(t[12]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Ye)):m("",!0)])]),_:2},1024)]),_:2},1024))),128)),0===W.value.length?(u(),_(D,{key:0},{default:f(()=>[p(q,{colspan:"5",class:"text-center py-8 text-white/60"},{default:f(()=>[x(o(H.value?e.$t("admin.users.no_search_results"):e.$t("admin.users.no_users")),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),p(we,{"current-page":L.value,"total-pages":A.value,"total-count":z.value,"page-size":M.value,"has-next":T.value,"has-prev":S.value,onPageChange:ue,onPageSizeChange:de},null,8,["current-page","total-pages","total-count","page-size","has-next","has-prev"])])):m("",!0)]),_:1},8,["tabs"]),p(Z,{show:E.value,title:e.$t("admin.users.delete_modal.title"),message:e.$t("admin.users.delete_modal.message").replace("{username}",(null==(v=R.value)?void 0:v.username)||""),"confirm-text":e.$t("admin.users.delete_modal.confirm"),"cancel-text":e.$t("admin.users.delete_modal.cancel"),type:"danger",onConfirm:re,onCancel:t[1]||(t[1]=e=>E.value=!1)},null,8,["show","title","message","confirm-text","cancel-text"]),p(Z,{show:G.value,title:e.$t("admin.users.ban_modal.title"),message:e.$t("admin.users.ban_modal.message").replace("{username}",(null==(g=R.value)?void 0:g.username)||""),"confirm-text":e.$t("admin.users.ban_modal.confirm"),"cancel-text":e.$t("admin.users.ban_modal.cancel"),type:"danger",onConfirm:ne,onCancel:t[2]||(t[2]=e=>G.value=!1)},null,8,["show","title","message","confirm-text","cancel-text"]),p(Z,{show:K.value,title:e.$t("admin.users.unban_modal.title"),message:e.$t("admin.users.unban_modal.message").replace("{username}",(null==(h=R.value)?void 0:h.username)||""),"confirm-text":e.$t("admin.users.unban_modal.confirm"),"cancel-text":e.$t("admin.users.unban_modal.cancel"),type:"info",onConfirm:oe,onCancel:t[3]||(t[3]=e=>K.value=!1)},null,8,["show","title","message","confirm-text","cancel-text"]),Q.value?(u(),s("div",Ze,[a("div",{class:"password-modal-backdrop",onClick:t[4]||(t[4]=e=>Q.value=!1)}),a("div",et,[a("h3",tt,o(e.$t("admin.users.change_password_modal.title")),1),a("div",st,[a("div",null,[p(P,{for:"newPassword",class:"text-white text-sm font-medium mb-2 block"},{default:f(()=>[x(o(e.$t("admin.users.change_password_modal.new_password")),1)]),_:1}),k(a("input",{id:"newPassword","onUpdate:modelValue":t[5]||(t[5]=e=>X.value=e),type:"password",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent backdrop-blur-sm",placeholder:e.$t("admin.users.change_password_modal.password_placeholder")},null,8,at),[[y,X.value]])]),a("div",lt,[p(F,{variant:"outline",onClick:t[6]||(t[6]=e=>Q.value=!1),class:"bg-white/10 border-white/20 text-white hover:bg-white/20"},{default:f(()=>[x(o(e.$t("common.cancel")),1)]),_:1}),p(F,{onClick:ie,disabled:!X.value,class:"bg-blue-500 hover:bg-blue-600 text-white"},{default:f(()=>[x(o(e.$t("common.save")),1)]),_:1},8,["disabled"])])])])])):m("",!0),p(ze)])}}}),[["__scopeId","data-v-f035c4ab"]]),nt={class:"admin-panel"},ot={class:"glass-card"},it=j(e({__name:"AdminPanel",setup:e=>(e,t)=>(u(),s("div",nt,[a("div",ot,[p(rt)])]))}),[["__scopeId","data-v-a3158701"]]);export{it as default};
